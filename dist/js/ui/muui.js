define(["muui/core/utils"],function(e){var t;return t=function(){function t(e){var t;if(this.opts=t=this.get_opts(e),!t.el)throw new Error("el cannot be empty.");this.$el=$(t.el),this.render().done(function(e){return function(){return e.init_events()}}(this))}return t.defaults={el:"",datasource:"",render_fn:"replaceWith",data_filter:function(e){return e},before_render:function(){},after_render:function(){}},t.prototype.get_opts=function(e){return $.extend({},t.defaults,e)},t.prototype.get_datasource=function(){var e;e=this.opts.datasource;try{e=JSON.parse(e)}catch(t){e=this.opts.datasource}return e},t.prototype.render=function(){var t,r,n,o,i,u;return t=this.$el,i=this.opts,n=i.before_render,r=i.after_render,u=i.tmpl,n(),o=$.Deferred(),u?require(["text!"+u+".html"],function(n){return function(u){var a,s,f;return s=i.render_fn,f=function(e){var i;return i=$(_.template(u)(e)),t[s](i),"replaceWith"===s&&(n.$el=i),o.resolve(e,i),r(e,i)},a=n.get_datasource(),a?e.api(a).done(function(e){return f(i.data_filter(e))}):f()}}(this)):(o.resolve(),r()),o.promise()},t.prototype.init_events=function(){},t}()});