var __slice=[].slice;define(["core/utils"],function(e){var t,r;return t=$("html"),r=function(){function r(e){var t;if(this._jq=$({}),this.opts=t=this.get_opts(e),!t.el)throw new Error("el cannot be empty.");this.$el=$(t.el),this.before_render(),t.before_render(),this.trigger("before_render"),this.render(t.render_args).done(function(e){return function(){var r;return r=1<=arguments.length?__slice.call(arguments,0):[],e.init_events(),e.after_render([r]),t.after_render([r]),e.trigger("after_render",[r])}}(this))}return r.defaults={el:"",datasource:"",render_args:{},render_fn:"replaceWith",data_filter:function(e){return e},before_render:function(){},after_render:function(){}},r.prototype.get_opts=function(){return r.defaults},r.prototype.render=function(r){var n,i,o,s,a,u,l,f,c;return f=this,n=this.$el,a=this.opts,t.has(n).length||(this.$el=n=$(a.el)),c=a.tmpl,u=a.render_fn,o=a.datasource,i=a.data_filter,s=$.Deferred(),l=function(t){var l;return l=function(e){var r;return r=$(t(_.isEmpty(e)&&{}||e)),n[u](r),"replaceWith"===u&&(f.$el=r),s.resolve(e,r)},o?e.api(o).done(function(e){return l(i(e))}):l(_.isEmpty(r)&&a.data||r)},c?e.is_template(c)?l(c):require(["text!"+c+".html"],function(e){return l(_.template(e))}):s.resolve(),s.promise()},r.prototype.on=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],this._jq.on.apply(this._jq,e),this},r.prototype.off=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],this._jq.off.apply(this._jq,e),this},r.prototype.once=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],this._jq.one.apply(this._jq,e),this},r.prototype.trigger=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],this._jq.trigger.apply(this._jq,e),this},r.prototype.init_events=function(){},r.prototype.before_render=function(){},r.prototype.after_render=function(){},r}()});