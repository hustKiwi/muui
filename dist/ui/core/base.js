var extend=function(e,t){function r(){this.constructor=e}for(var n in t)hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty,slice=[].slice;define(["muui/core/utils","muui/core/event_emitter"],function(e,t){var r;return r=function(t){function r(e){var t;if(this.opts=t=this.getOpts(e),!t.el)throw new Error("el cannot be empty.");this.$el=$(t.el),r.__super__.constructor.call(this),this.beforeRender(),t.beforeRender.apply(this),this.trigger("beforeRender"),this.render(t.renderArgs).done(function(e){return function(){var r;return r=1<=arguments.length?slice.call(arguments,0):[],e.afterRender([r]),t.afterRender.apply(e,r),e.trigger("afterRender",[r]).initEvents(),t.initEvents.apply(e)}}(this))}return extend(r,t),r.defaults={el:"",dataSource:"",renderArgs:{},renderFn:"replaceWith",dataFilter:function(e){return e},beforeRender:function(){},afterRender:function(){},initEvents:function(){}},r.prototype.getOpts=function(){return r.defaults},r.prototype.render=function(t){var r,n,o,i,u,s,p,a,c,f;return c=this,i=$.Deferred(),r=this.$el,u=this.opts,s=this.opts,f=s.tmpl,p=s.renderFn,o=s.dataSource,n=s.dataFilter,a=function(u){var s;return s=function(e){var t;return t=$(u(_.isEmpty(e)&&{}||e)),r[p](t),"replaceWith"===p&&(c.$el=t),i.resolve(e,t)},o?e.api(o).done(function(e){return s(n(e))}):s(t)},f?e.isTemplate(f)?a(f):require(["text!"+f+".html"],function(e){return a(_.template(e))}):i.resolve(),i.promise()},r.prototype.initEvents=function(){},r.prototype.beforeRender=function(){},r.prototype.afterRender=function(){},r}(t)});