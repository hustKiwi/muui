var extend=function(e,n){function t(){this.constructor=e}for(var r in n)hasProp.call(n,r)&&(e[r]=n[r]);return t.prototype=n.prototype,e.prototype=new t,e.__super__=n.prototype,e},hasProp={}.hasOwnProperty;define(["muui/core/base"],function(e){var n,t,r;return t=Math.ceil,r=Math.floor,n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.defaults={el:".muui-pager",renderFn:"html",tmpl:_.template('<% if (!_.isEmpty(args)) { %>\n    <% var path = args.path; %>\n    <% _.each(pager, function(item) { %>\n        <% if (item === \'prev\') { %>\n            <a class="muui-pager-prev muui-pager-item"\n                data-page="<%- args.prev %>"\n                href="<%- path.replace(/{page}/g, args.prev) %>">\n                <%- args.prevLabel %>\n            </a>\n        <% } else if (item === \'prevDisabled\') { %>\n            <span class="muui-pager-prev muui-pager-disabled muui-pager-item">\n                <%- args.prevLabel %>\n            </span>\n        <% } else if (item === \'next\') { %>\n            <a class="muui-pager-next muui-pager-item"\n                data-page="<%- args.next %>"\n                href="<%- path.replace(/{page}/g, args.next) %>">\n                <%- args.nextLabel %>\n            </a>\n        <% } else if (item === \'nextDisabled\') { %>\n            <span class="muui-pager-next muui-pager-disabled muui-pager-item">\n                <%- args.nextLabel %>\n            </span>\n        <% } else if (item === \'cur\') { %>\n            <span class="muui-pager-item cur"><%- args.cur %></span>\n        <% } else if (item === \'...\') { %>\n            <span class="muui-pager-ellipse">...</span>\n        <% } else { %>\n            <a class="muui-pager-item"\n                data-page="<%- item %>"\n                href="<%- path.replace(/{page}/g, item) %>">\n                <%- item %>\n            </a>\n        <% } %>\n    <% }); %>\n<% } %>'),handles:{redirect:function(){}}},n.prototype.getOpts=function(e){return $.extend(!0,{},n.__super__.getOpts.call(this),n.defaults,e)},n.prototype.initEvents=function(){var e,n;return n="muui-pager-item",e=this.opts.handles,this.$el.on("mouseenter","a."+n+":not(.on, .cur)",function(){return $(this).addClass("on")}).on("mouseleave","a."+n,function(){return $(this).removeClass("on")}).on("click","a."+n,e.redirect)},n.prototype.beforeRender=function(){return this.$el.addClass("loading")},n.prototype.afterRender=function(){return this.$el.removeClass("loading")},n.prototype.render=function(e){return n.__super__.render.call(this,this.build(e)||{args:null})},n.prototype.build=function(e){var n,a,p,s,i,u,l,o,g,c,h,f,m,d,v,y,b,x;return _.defaults(e,{path:"?page={page}",size:10,length:7,prevLabel:"上一页",nextLabel:"下一页"}),a=e.cur,x=e.total,b=e.size,u=e.length,b>=x?null:(o=t(x/b),n=!1,u>o&&(u=o,n=!0),1<=(c=a=~~a)&&o>=c||(a=1),1!==a&&(s=!0,e.prev=a-1),a!==o&&(p=!0,e.next=a+1),n?g=function(){m=[];for(var e=1;o>=1?o>=e:e>=o;o>=1?e++:e--)m.push(e);return m}.apply(this):(l=r((u-1)/2),g=1>a-l?function(){d=[];for(var e=1;u>=1?u>=e:e>=u;u>=1?e++:e--)d.push(e);return d}.apply(this):a+l>o-2?function(){v=[];for(var e=h=o-u;o>=h?o>=e:e>=o;o>=h?e++:e--)v.push(e);return v}.apply(this):function(){y=[];for(var e=f=a-l,n=a+u-1-l;n>=f?n>=e:e>=n;n>=f?e++:e--)y.push(e);return y}.apply(this)),1===g.length?null:(1!==g[0]&&(g[0]=1,g[1]!==a&&(g[1]="...")),i=g.length,g[i-1]!==o&&(g[i-1]=o,g[i-2]="..."),g[_.indexOf(g,a)]="cur",g.unshift(s&&"prev"||"prevDisabled"),g.push(p&&"next"||"nextDisabled"),{args:_.merge(e,{cur:a,total:x,size:b,length:u}),pager:g}))},n}(e)});